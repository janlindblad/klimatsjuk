{% extends "counter/base.html" %}

{% block title %}Klimatsjuk{% endblock %}

{% block page_title %}klimatsjuk{% endblock %}

{% block content_section %}
<div id="quote-box" class="quote-box">
    <p id="quote-text"></p>
</div>

<script>
    let quotes = [];
    let currentQuoteIndex = 0;
    
    async function fetchQuotes() {
        try {
            const response = await fetch('/api/quotes/');
            if (!response.ok) throw new Error('Failed to fetch quotes');
            quotes = await response.json();
            if (quotes.length > 0) {
                displayRandomQuote();
            }
        } catch (error) {
            console.error('Error fetching quotes:', error);
        }
    }
    
    function displayRandomQuote() {
        if (quotes.length === 0) return;
        
        currentQuoteIndex = Math.floor(Math.random() * quotes.length);
        const quote = quotes[currentQuoteIndex];
        const quoteText = document.getElementById('quote-text');
        
        // Fade out
        quoteText.style.opacity = '0';
        
        setTimeout(() => {
            quoteText.textContent = quote.text;
            quoteText.style.opacity = '1';
        }, 250);
    }
    
    // Fetch quotes on page load
    fetchQuotes();
    
    // Rotate quotes every 30 seconds
    setInterval(displayRandomQuote, 30000);
</script>
{% endblock %}
